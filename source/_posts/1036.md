---
title: iptables
date: 2023-08-15 22:41:38
tags:
    - network
categories: [linux, network]
---
## iptables 
### 三张表

- filter: 负责过滤数据包，包括的规则链有：input，output和forward
- nat: 用于网络地址转换（IP、端口），包括的规则链有：prerouting，postrouting 和 output
- mangle: 主要应用在修改数据包、流量整形、给数据包打标识，默认的规则链有：INPUT，OUTPUT、 forward，POSTROUTING，PREROUTING

优先级：mangle > nat > filter

### 五条链
1. input: 匹配目标IP是本机的数据包
2. output: 出口数据包 ， 一般不在此链上做配置
3. forward: 匹配流经本机的数据包
4. prerouting: 修改目的地址，用来做 DNAT 。如：把内网中的 80 端口映射到互联网端口
5. postrouting: 修改源地址，用来做 SNAT。如：局域网共享一个公网IP接入Internet。